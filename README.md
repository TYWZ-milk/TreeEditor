# 树木编辑器
## 本周学习任务
本周开始TreeEditor 项目，做一个树木的编辑器，计划完成对主枝干的编辑。

## 主枝干属性编辑
已经完成对单个树木主要枝干的编辑，包括主枝干的高度、粗细、位置等。

最左侧一栏为主枝干的编辑框，包括：

Background:场景的背景颜色。

Segmentation:每个形成主枝干的圆环序列生成枝干时的分段数，通过控制分段数可以调节模型的精细程度，不同精细度的模型可以用于层次细节。暂定取值范围为 0~30。建议取值高于 20，这样的树木模型更加精细。

Number of circles:圆弧序列的圆环数。该值主要决定了枝干的高度，暂定取值范围为 0~30。

Radiusof tree:圆环序列的半径大小。该值影响枝干的粗细，暂定取值范围为 1~5。

Rebuild：重塑枝干，通过更改上述几个属性后，点击 rebuild 可获得相应更改后的枝干。

Show branch：勾选时显示树木模型，不勾选时只树木对应显示圆环序列。

Show wireframe：勾选时显示树木模型的轮廓但不包括树皮，可以方便直接观察到圆环序列。

Position：模型在场景中的位置。

另外还有一栏编辑框，用于对树木的其他枝干进行编辑。

## 圆环序列位置编辑
在对主枝干完成大小、粗细等编辑后，可以对主枝干的形状进行编辑，主要方法是通过对圆环序列在场景中的位置进行修改。该方法在勾选 show wireframe 的时比较方便，双击场景中的某个圆环，可以随意移动该圆环，随后点击编辑框内的 rebuild，可以获得修改后的树木形状。可以一次移动多个圆环。但圆环序列的圆环是按照顺序组成树木模型枝干的，不可以把某个位置的圆环放在高于其上一层圆环的位置或下一层圆环的位置，否则会失真。具体步骤为：
* 勾选 show wireframe 便于观察枝干的圆形序列位置。
* 点击其中一个圆环进行移动。
* 点击编辑框内的 rebuild 可获得新形状的枝干。

## 存在的问题

>目前对一棵树木的主枝干的编辑功能已经完成，问题存在于如何对主枝干上的子枝干进行添加和编辑。我有两个方案但各有优缺点，目前还在思考选择哪一个或怎样修改：
>>在上方的编辑框中修改枝干的属性后点击 addbranch 向场景中添加一个子枝干，随后手动拖拽该子枝干到树木的指定位置。该方法可编辑的自由度比较高，可以将生成子的枝干拖拽到任何位置，但最后的树木模型真实度很低，存在裂缝，拖拽拼接后的枝干之间可能存在很大的空隙，该方法由于真实度太低，我不太倾向于该方法。

>>第二个方法是先点击 addbranch 向场景中添加一个子枝干，该子枝干随机生成在主枝干的某一位置，之后可以对子枝干进行编辑，包括形状、大小等编辑。该方法解决了上一个方法中添加子枝干时出现空隙的问题，但缺点是，子枝干的位置在随机生成中被固定，没办法再编辑中对其进行修改，树木可编辑的自由度反而降低。

该问题解决后，该项目基本完成大部分，现在主要受困于该问题，还未想出对策。

## 个人小结

本周遇到的主要问题就是如何添加子枝干的问题。但在项目中还存在一个顺序问题，对主枝干的编辑要先调节高度和粗细，确定好后可以对圆环序列进行编辑修改枝干的形状，但在对圆环序列进行编辑时或编辑后无法修改主枝干的高度和粗细，否则获得的树木与原来不一致。

项目中主枝干的圆环序列信息保存在 cs 中，每次在编辑框内的修改都记录保存在该变量中，之后 rebuild 根据 cs 重建树木。
